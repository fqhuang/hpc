# 配置ECS集群互相免密登录<a name="ZH-CN_TOPIC_0078131833"></a>

## 操作场景<a name="section6233516210656"></a>

该任务指导用户在ECS集群上进行相关设置，并使其可以相互免密登录。仅支持在使用密钥登录弹性云服务器的情况下配置ECS集群互相免密登录。

## 背景信息<a name="section28759517175946"></a>

$：表示在普通用户下，执行相关操作。

\#：表示在超级用户下，执行相关操作。

普通用户切换至超级用户，请使用命令**sudo su**。

## 前提条件<a name="section2501977510713"></a>

已成功创建ECS集群，并绑定了弹性IP进行登录。

## 操作步骤<a name="section5869942019421"></a>

1.  <a name="li56220859194244"></a>使用“PuTTY”，采用密钥对方式登录集群中任意一台ECS。
2.  执行以下命令，防止系统超时退出。

    **\# TMOUT=0**

3.  执行以下命令，添加集群中所有主机的私网IP地址和主机名。

    **\# vi /etc/hosts**

    添加的内容为集群中所有ECS的私网IP地址和主机名，例如：

    **192.168.0.1 ecs-ff-0001**

    **192.168.0.2 ecs-ff-0002**

    **..**

4.  <a name="li54062398194244"></a>执行以下命令，ssh方式登录本节点，验证是否可以不输入密码登录ECS。其中hostname1为本主机名。

    **$ ssh localhost**

    **$ ssh  _hostname1_**

5.  依次登录集群中其他ECS，重复执行步骤[1](#li56220859194244)～[4](#li54062398194244)。
6.  执行以下命令，验证参加测试的ECS之间是否可以免密码互相登录。

    假设集群中有2个弹性云服务器，另一个云服务器的主机名为hostname2，则命令行为：

    **$ ssh  _用户名_@_SERVER\_IP_**

    **$ ssh  _hostname2_**


